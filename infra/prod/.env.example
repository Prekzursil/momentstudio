# Production compose environment (copy to infra/prod/.env)
#
# This file is used by:
# - docker compose variable substitution (POSTGRES_PASSWORD, etc.)
# - Caddyfile placeholders (CADDY_EMAIL)
#
# Keep infra/prod/.env out of git (already ignored via .gitignore).

# --- Public site ---
# Domain served by Caddy (TLS is issued for both apex + www).
PUBLIC_DOMAIN=momentstudio.ro

# Email used by Let's Encrypt / ACME (recommended).
# Example: admin@momentstudio.ro
CADDY_EMAIL=admin@momentstudio.ro

# --- Postgres ---
POSTGRES_DB=adrianaart
POSTGRES_USER=postgres
# Generate a strong password, e.g.: `openssl rand -hex 32`
POSTGRES_PASSWORD=change-me

# --- Backups (used by infra/prod/backup.sh) ---
# If BACKUP_RETENTION_COUNT is set (>0), it takes precedence over BACKUP_RETENTION_DAYS.
BACKUP_RETENTION_DAYS=30
BACKUP_RETENTION_COUNT=0

# Optional: Redis URL for shared rate limiting/caches.
# If omitted, the prod compose defaults to the internal service: redis://redis:6379/0
REDIS_URL=

# --- Reverse proxy / real client IP ---
# Uvicorn should trust proxy headers (X-Forwarded-For / X-Forwarded-Proto) only from known proxies.
# In this compose stack the backend is not exposed publicly, so "*" is acceptable (default).
# If you expose the backend port publicly, set this to your proxy IPs/CIDRs (e.g. "127.0.0.1,10.0.0.0/8").
FORWARDED_ALLOW_IPS=*

# Optional: make container names stable across multiple projects on the same VPS.
COMPOSE_PROJECT_NAME=momentstudio
