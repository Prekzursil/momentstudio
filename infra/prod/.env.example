# Production compose environment (copy to infra/prod/.env)
#
# This file is used by:
# - docker compose variable substitution (POSTGRES_PASSWORD, etc.)
# - Caddyfile placeholders (CADDY_EMAIL)
#
# Keep infra/prod/.env out of git (already ignored via .gitignore).

# --- Public site ---
# Domain served by Caddy (TLS is issued for both apex + www).
PUBLIC_DOMAIN=momentstudio.ro

# Email used by Let's Encrypt / ACME (recommended).
# Example: admin@momentstudio.ro
CADDY_EMAIL=admin@momentstudio.ro

# --- Postgres ---
POSTGRES_DB=adrianaart
POSTGRES_USER=postgres
# Generate a strong password, e.g.: `openssl rand -hex 32`
POSTGRES_PASSWORD=change-me

# --- Backups (used by infra/prod/backup.sh) ---
# If BACKUP_RETENTION_COUNT is set (>0), it takes precedence over BACKUP_RETENTION_DAYS.
BACKUP_RETENTION_DAYS=30
BACKUP_RETENTION_COUNT=0
# DAM local media trash retention baseline (docs/ops reference).
# Keep backup retention >= this value.
MEDIA_DAM_TRASH_RETENTION_DAYS=30

# Optional: Redis URL for shared rate limiting/caches.
# If omitted, the prod compose defaults to the internal service: redis://redis:6379/0
REDIS_URL=

# --- Reverse proxy / real client IP ---
# Uvicorn should trust proxy headers (X-Forwarded-For / X-Forwarded-Proto) only from known proxies.
# Default: trust only loopback + RFC1918 private networks.
# If your reverse proxy / load balancer uses a public IP (or runs outside these CIDRs), you MUST
# set this explicitly to the proxy IPs/CIDRs that connect to the backend.
FORWARDED_ALLOW_IPS=127.0.0.1,::1,10.0.0.0/8,172.16.0.0/12,192.168.0.0/16

# Optional: make container names stable across multiple projects on the same VPS.
COMPOSE_PROJECT_NAME=momentstudio

# Optional: static app version shown in diagnostics.
# Normally omitted because `infra/prod/deploy.sh` auto-sets APP_VERSION from git SHA.
APP_VERSION=

# Deploy toggles:
# - RUN_POST_SYNC_VERIFY=1 runs `infra/prod/verify-live.sh` after deploy.
# - RUN_GSC_INDEXING_CHECKLIST=1 prints Search Console URL-inspection checklist output.
RUN_POST_SYNC_VERIFY=1
RUN_GSC_INDEXING_CHECKLIST=1
